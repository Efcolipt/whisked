jQuery(document).ready(function(r){function a(e){r(e).attr("src",window.location.protocol+"//"+window.location.hostname+":"+window.location.port+"/public/images/default/collection/no-img.jpg"),r(e).off("error")}r(".burger_icon_mobile_menu").click(function(){r(".header_menu_desktop").toggleClass("show_header_menu_desktop"),r(this).toggleClass("burger_icon_mobile_menu_open")}),r(".header_account_avatar").click(function(e){r(".header_account_info").stop().slideToggle()}),r(".poster_collection img").each(function(e,t){void 0!==r(t).attr("data-src")&&!1!==r(t).attr("data-src")&&""!==r(t).attr("data-src")&&r(t).attr("src",r(t).attr("data-src")),r(t).on("error",function(){a(this)}).attr("src",r(t).attr("src"))}),r(".collection_top_side_view_img img").each(function(e,t){void 0!==r(t).attr("data-src")&&!1!==r(t).attr("data-src")&&""!==r(t).attr("data-src")&&r(t).attr("src",r(t).attr("data-src")),r(t).on("error",function(){a(this)}).attr("src",r(t).attr("src"))}),r(".poster_collection_slider img").each(function(e,t){void 0!==r(t).attr("data-src")&&!1!==r(t).attr("data-src")&&""!==r(t).attr("data-src")&&r(t).attr("src",r(t).attr("data-src")),r(t).on("error",function(){a(this)}).attr("src",r(t).attr("src"))});let s=0,o=r("header");0<o.offset().top&&(o.addClass("showHeader"),r(".burger_icon_mobile_menu").remove("burger_icon_mobile_menu_open"),r(".header_menu_desktop").removeClass("show_header_menu_desktop")),r(window).scroll(function(e){var t=r(this).scrollTop();window.pageYOffset<=0?o.removeClass("hideHeader showHeader"):t>s?(r(".header_menu_desktop").removeClass("show_header_menu_desktop"),r(".burger_icon_mobile_menu").removeClass("burger_icon_mobile_menu_open"),r(".header_account_info").stop().slideUp(100),o.addClass("hideHeader").removeClass("showHeader")):(o.addClass("showHeader").removeClass("hideHeader"),r(".header_account_info").stop().slideUp(100)),s=t}),NProgress.start(),window.onload=function(){NProgress.done(),r(".fade").removeClass("out")}});const token="7250d60740fc5811592ea4fcf893239f",Search={data(){return{contents:[],valSearch:"",proxySearch:!1,searching:!1,proxyError:!1,searched:!1,inputActive:!1}},methods:{async search(){var e;this.contents=[],this.searching=!0,this.searched=this.proxyError=!1,0<this.valSearch.length&&(this.proxySearch=!0,e=await request(`https://bazon.cc/api/search?token=${token}&title=${this.valSearch}`),this.proxySearch=!1,"results"in e&&!Boolean(!this.result(e.results))?this.searched=!this.proxyError:this.proxyError=!0,console.log(this.contents))},result(t){var r=t.length<=6?t.length:6;const a={};for(let e=0;e<r;e++)searchKeysInObj(t[e],["kinopoisk_id","year","rus","rating_imdb","poster","quality","genre"])&&(a[e]={id:t[e].kinopoisk_id,title:t[e].info.rus,poster:t[e].info.poster,genre:t[e].info.genre.split(",")[0],rating:t[e].info.rating.rating_imdb,quality:t[e].quality,year:t[e].info.year});return this.contents=a},typeSearch(e){this.valSearch=e.target.value}}},search=Vue.createApp(Search);function getObjectVal(e,t){let r="";for(var a in e){if(a==t)return e[t];"object"==typeof e[a]&&null!==e[a]&&a!=t&&(r=getObjectVal(e[a],t))}return r||!1}function searchKeysInObj(t,r){const a=[];for(let e=0;e<r.length;e++){var s=getObjectVal(t,r[e]);s&&a.push(s)}return a.length===r.length}search.component("loader-search",{template:`
        <div class="spinner__loader">
            <div class="spinner__loader__inner__content"></div>
        </div>
    `}),search.component("data-search",{props:["title","quality","rating","id","year","poster","genre"],template:`
        <a :href="'/watch/' + id">
            <div class="header_content_searched">
                <div class="inner_header_content_searched">
                    <div class="header_content_searched_img">
                        <img v-bind:src="poster" v-bind:alt="title">
                    </div>
                    <div class="header_content_searched_about">
                        <h3>{{ title }}</h3>
                        <div class="header_content_searched_about_list">
                            <p class="header_content_searched_about_list_item">{{ genre }}</p>
                            <p class="header_content_searched_about_list_item">{{ quality }}</p>
                        </div>
                        <div class="header_content_searched_about_list">
                            <p class="header_content_searched_about_list_item">{{ rating }}</p>
                            <p class="header_content_searched_about_list_item">{{ year }}</p>
                        </div>

                    </div>
                </div>
            </div>
        </a>
    `}),search.mount("#search");async function request(t,r="POST",a=null){try{const s={};let e;a&&(s["Content-type"]="application/json",e=JSON.stringify(a));const o=await fetch(t,{method:r,headers:s,body:e});return await o.json()}catch(e){console.warn("Error "+e.message)}}